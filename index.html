<div id="legal-container" style="max-width:900px;margin:auto;background:#000;color:#fff;padding:20px;font-family:Arial">

<h2>AL CIELO – CONSENTIMIENTO INFORMADO</h2>

<textarea readonly style="width:100%;height:360px;background:#111;color:#0f0;border:1px solid #333;padding:10px;">
AL CIELO – BY MAY ROGA LLC
Propiedad legal y exclusiva de MAY ROGA LLC (USA)

CONSENTIMIENTO INFORMADO, TÉRMINOS DE USO Y DESCARGO TOTAL DE RESPONSABILIDAD

1. DECLARACIÓN DE ESTATUS LEGAL
Declaro que soy ciudadano o residente legal permanente en EE. UU., o de un país sin sanciones estadounidenses. No soy ciudadano ni representante de países sancionados.

2. ALCANCE Y LIMITACIÓN DE USO
Software privado para navegación asistida, uso lícito personal/profesional/logístico. Prohibido uso militar, gubernamental, policial, de inteligencia o ilegal.

3. FUNCIONAMIENTO OFFLINE
El sistema puede operar sin internet. Mapas y rutas son referenciales. Asumo responsabilidad total por decisiones, accidentes, multas o daños.

4. DATOS Y MAPAS DE TERCEROS
Mapas y datos de OpenStreetMap y fuentes abiertas. Pueden contener errores. MAY ROGA LLC no se responsabiliza. 
El usuario exime total y permanentemente a MAY ROGA LLC y sus socios.

5. LICENCIA, DISPOSITIVOS Y CONTROL
Acceso limitado por licencia. Solo un dispositivo activo. Licencia revocable ante uso indebido.

6. EXONERACIÓN TOTAL DE RESPONSABILIDAD
Renuncio a toda acción legal contra AL-CIELO-BY-MAY-ROGA-LLC, MAY ROGA LLC, empleados o afiliados.

7. JURISDICCIÓN
Leyes de EE. UU., tribunales competentes en EE. UU.

8. ATRIBUCIÓN OSM
Mapas y datos proporcionados por OpenStreetMap contributors (https://www.openstreetmap.org/copyright)
</textarea>

<label style="display:block;margin-top:15px;">
  <input type="checkbox" id="check-legal">
  Declaro que he leído, comprendido y acepto TODAS las condiciones legales
</label>

<button style="margin-top:20px;padding:15px;width:100%;background:#0056b3;color:white;border:none;font-size:18px"
onclick="activarServicio()">
ACEPTO Y ENTRAR AL SISTEMA
</button>

</div>

<script>
async function activarServicio(){
  const device_id = localStorage.getItem("device_id") || crypto.randomUUID();
  localStorage.setItem("device_id", device_id);

  const link_id = location.pathname.split("/").pop();
  const legal_ok = document.getElementById("check-legal")?.checked || false;

  const res = await fetch(`/activar/${link_id}`, {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({device_id, legal_ok})
  });

  const data = await res.json();
  if(res.ok) location.href = data.map_url;
  else alert(data.error || "Acceso denegado.");
}
</script>
